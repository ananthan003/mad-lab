package com.example.myapplication;

import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.widget.Button;
import android.widget.EditText;
import java.util.ArrayList;

public class MainActivity extends AppCompatActivity {
    EditText e3;
    Button[] numberButtons = new Button[10];
    Button btplus, btminus, btprod, btequal, btc, btdiv;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        e3 = findViewById(R.id.e3);

        numberButtons[0] = findViewById(R.id.bt0);
        numberButtons[1] = findViewById(R.id.bt01);
        numberButtons[2] = findViewById(R.id.bt02);
        numberButtons[3] = findViewById(R.id.bt03);
        numberButtons[4] = findViewById(R.id.bt04);
        numberButtons[5] = findViewById(R.id.bt05);
        numberButtons[6] = findViewById(R.id.bt06);
        numberButtons[7] = findViewById(R.id.bt07);
        numberButtons[8] = findViewById(R.id.bt08);
        numberButtons[9] = findViewById(R.id.bt09);

        btplus = findViewById(R.id.btplus);
        btminus = findViewById(R.id.btminus);
        btprod = findViewById(R.id.btprod);
        btdiv = findViewById(R.id.btdiv);
        btequal = findViewById(R.id.btequal);
        btc = findViewById(R.id.btc);

        for (int i = 0; i <= 9; i++) {
            int finalI = i;
            numberButtons[i].setOnClickListener(v -> e3.append(String.valueOf(finalI)));

        }
        btplus.setOnClickListener(v -> e3.append("+"));
        btminus.setOnClickListener(v -> e3.append("-"));
        btprod.setOnClickListener(v -> e3.append("*"));
        btdiv.setOnClickListener(v -> e3.append("/"));

        btc.setOnClickListener(v -> e3.setText(""));
        btequal.setOnClickListener(v -> {
            String expr = e3.getText().toString();

            int opIndex = -1;
            char operator = ' ';

            if (expr.contains("+")) {
                opIndex = expr.indexOf("+");
                operator = '+';
            } else if (expr.contains("-")) {
                opIndex = expr.indexOf("-");
                operator = '-';
            } else if (expr.contains("*")) {
                opIndex = expr.indexOf("*");
                operator = '*';
            } else if (expr.contains("/")) {
                opIndex = expr.indexOf("/");
                operator = '/';
            }
            if (opIndex > 0 && opIndex < expr.length() - 1) {
                String num1 = expr.substring(0, opIndex);
                String num2 = expr.substring(opIndex + 1);

                int n1 = Integer.valueOf(num1);
                int n2 = Integer.valueOf(num2);
                int result = 0;

                if (operator == '+') result = n1 + n2;
                else if (operator == '-') result = n1 - n2;
                else if (operator == '*') result = n1 * n2;
                else if (operator == '/') result = n1 / n2;

                e3.setText(String.valueOf(result));
            }
        });

    }

}
